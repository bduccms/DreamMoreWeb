<section id="testimonials" class="py-5" style="background: linear-gradient(135deg, #010318 0%, #0a0e2e 100%);">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title display-4 fw-bold text-white mb-3">What Our Clients Say</h2>
            <p class="lead text-light opacity-75">See how our services have impacted our clients</p>
            <div class="divider mx-auto" style="width: 100px; height: 4px; background: linear-gradient(to right, #ff7800, #ff4d00);"></div>
        </div>

        <% if (testimonials && testimonials.length > 0) { %>
            <div id="testimonialCarousel" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                    <% for (let i = 0; i < testimonials.length; i += 3) { %>
                        <div class="carousel-item <%= i === 0 ? 'active' : '' %>">
                            <div class="row g-4 justify-content-center">
                                <% testimonials.slice(i, i + 3).forEach(testimonial => { %>
                                    <div class="col-md-4">
                                        <div class="card h-100 border-0 shadow-lg testimonial-card text-center p-4" 
                                             style="border-radius: 10px; background: rgba(255,255,255,0.05);">
                                            <% if (testimonial.photo) { %>
                                                <img src="<%= testimonial.photo %>" 
                                                     class="rounded-circle mb-3" 
                                                     alt="<%= testimonial.name %>" 
                                                     style="width: 100px; height: 100px; object-fit: cover; border: 2px solid #ff7800;">
                                            <% } else { %>
                                                <div class="bg-light rounded-circle mb-3 d-flex align-items-center justify-content-center" 
                                                     style="width: 100px; height: 100px;">
                                                    <i class="fas fa-user fa-2x text-muted"></i>
                                                </div>
                                            <% } %>
                                            <h5 class="text-white fw-bold mb-2"><%= testimonial.name %></h5>
                                            <p class="text-light opacity-75"><%= testimonial.description.length > 150 ? testimonial.description.substring(0, 150) + '...' : testimonial.description %></p>
                                        </div>
                                    </div>
                                <% }) %>
                            </div>
                        </div>
                    <% } %>
                </div>

                <!-- Carousel controls -->
                <button class="carousel-control-prev" type="button" data-bs-target="#testimonialCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon bg-dark rounded-circle p-3" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#testimonialCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon bg-dark rounded-circle p-3" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        <% } else { %>
            <div class="text-center py-5">
                <img src="/assets/images/no-testimonial.svg" alt="No testimonials found" class="img-fluid mb-4" style="max-height: 200px;">
                <h4 class="text-muted">No testimonials yet</h4>
                <p class="text-muted">Add testimonials to showcase client feedback</p>
            </div>
        <% } %>
    </div>
</section>

<style>
.testimonial-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
}

.carousel-control-prev-icon,
.carousel-control-next-icon {
    background-size: 50% 50%;
}

@media (max-width: 768px) {
    .testimonial-card img {
        width: 80px;
        height: 80px;
    }
    .carousel-item .col-md-4 {
        flex: 0 0 100%;
        max-width: 100%;
    }
}
</style>
